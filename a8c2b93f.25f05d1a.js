(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{176:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return l})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return p}));var r=t(2),o=t(9),a=(t(0),t(200)),i={id:"sync",title:"Sync"},l={id:"toolchain/sync",title:"Sync",description:"Sync from your design tool to your [token manager",source:"@site/../docs/toolchain/sync.md",permalink:"/theemo/docs/toolchain/sync",sidebar:"toolchain",previous:{title:"Usage",permalink:"/theemo/docs/toolchain/usage"},next:{title:"Build",permalink:"/theemo/docs/toolchain/build"}},c=[{value:"1. Reader",id:"1-reader",children:[{value:"Figma",id:"figma",children:[]}]},{value:"2. Lexer",id:"2-lexer",children:[]},{value:"3. Writer",id:"3-writer",children:[]}],s={rightToc:c};function p(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},s,t,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Sync from your design tool to your ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"/theemo/docs/toolchain/glossary#token-manager-tool"}),"token manager\ntool")," is split into three steps:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Reader"),Object(a.b)("li",{parentName:"ol"},"Lexer"),Object(a.b)("li",{parentName:"ol"},"Writer")),Object(a.b)("p",null,"At this step, you should familiarized yourself with ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"/theemo/docs/toolchain/how-theemo-works"}),"how theemo\nworks"),"."),Object(a.b)("p",null,"The options go into your ",Object(a.b)("inlineCode",{parentName:"p"},"theemo.js")," file under the ",Object(a.b)("inlineCode",{parentName:"p"},"sync")," key. These are the\nparts of the ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"/theemo/docs/toolchain/example-config"}),"example config")," split apart. The example config\npage als describes the situation in which it is used."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"module.exports = {\n  sync: {...}\n}\n")),Object(a.b)("p",null,"Each section below desribes the respective configuration options, that go into ",Object(a.b)("inlineCode",{parentName:"p"},"sync"),"."),Object(a.b)("h2",{id:"1-reader"},"1. Reader"),Object(a.b)("p",null,"Connects to your ",Object(a.b)("inlineCode",{parentName:"p"},"source")," (e.g. figma) and parses out tokens. Initial Config:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"{\n  reader: {\n    source: 'figma'\n  }\n}\n")),Object(a.b)("p",null,"Depending on your source, you need to further merge in more properties."),Object(a.b)("h3",{id:"figma"},"Figma"),Object(a.b)("p",null,"To make figma work, these are the essential configuration options:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Connection parameters: ",Object(a.b)("inlineCode",{parentName:"li"},"figmaFile")," and ",Object(a.b)("inlineCode",{parentName:"li"},"figmaSecret")),Object(a.b)("li",{parentName:"ul"},"Referencing: Do you reference styles in figma? Tell it here how you do it",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"Currently only the plugin ",Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"https://www.figma.com/community/plugin/791262205400516364/Style-References"}),"Style\nReferences"),"\nis supported (",Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"https://gos.si/blog/full-featured-themes-in-figma/"}),"Usage explained here"),")"),Object(a.b)("li",{parentName:"ul"},"You shall not abuse description for that!"))),Object(a.b)("li",{parentName:"ul"},"At the moment, only styles are parsed. Use ",Object(a.b)("inlineCode",{parentName:"li"},"isTokenByStyle()")," to parse name\nand tell theemo this is a style you want to process as token")),Object(a.b)("p",null,"Note: With theemo, you have access to values from a ",Object(a.b)("inlineCode",{parentName:"p"},".env")," file."),Object(a.b)("p",null,"Config looks like this:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"{\n  reader: {\n    source: 'figma',\n\n    // figma credentials\n    figmaFile: process.env.FIGMA_FILE,\n    figmaSecret: process.env.FIGMA_SECRET\n\n    // referencer\n    referencer: {\n      type: 'figma-plugin',\n      plugin: 'style-referencer',\n      pluginOptions: {\n        jsonbinFile: process.env.JSONBIN_FILE,\n        jsonbinSecret: process.env.JSONBIN_SECRET\n      }\n    },\n\n    // parser\n    isTokenByStyle(style) {\n      return style.name.includes('.') && style.name.includes('/');\n    }\n  }\n}\n")),Object(a.b)("p",null,"Reference: ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"api/theemo.readerconfig"}),"ReaderConfig")),Object(a.b)("h2",{id:"2-lexer"},"2. Lexer"),Object(a.b)("p",null,"This step runs a lexical analysis based on your input to prepare tokens for the\nwriter. The lexer will return a ",Object(a.b)("strong",{parentName:"p"},"grouped token collection")," that will be the\ninput to the writer. In order to get to a grouped token collection, these steps\nare processed:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Normalize token"),Object(a.b)("li",{parentName:"ol"},"Classify token"),Object(a.b)("li",{parentName:"ol"},"Filter token"),Object(a.b)("li",{parentName:"ol"},"Group tokens")),Object(a.b)("p",null,"The output of one step is the input to the next step. If you classify a token,\nyou can use these information to filter them afterwards."),Object(a.b)("p",null,"The normalization step has a ",Object(a.b)("em",{parentName:"p"},"default")," behavior, which is why it is commented\nout in the sample configuration:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"{\n  lexer: {\n    // /**\n    //  * Default normalization strips white space from your token and reference name\n    //  */\n    // normalizeToken(token: Token): Token {\n    //   const normalized = { ...token };\n\n    //   normalized.name = normalized.name.replace(/\\s/g, '');\n    //   if (normalized.reference) {\n    //     normalized.reference = normalized.reference.replace(/\\s/g, '');\n    //   }\n\n    //   return normalized;\n    // },\n\n    /**\n     * Describe your tokens:\n     *\n     * - What's the type?\n     * - What's the color scheme?\n     */\n    classifyToken(token) {\n      const t = {...token};\n      t.type = t.name.startsWith('.') ? 'basic' : 'purpose';\n\n      const contextIndex = t.name.indexOf('.$');\n      if (contextIndex !== -1) {\n        t.colorScheme = t.name.slice(contextIndex + 2);\n        t.name = t.name.slice(0, contextIndex);\n      }\n\n      return t;\n    },\n\n    /**\n     * Here we filter tokens to only keep the purpose tokens\n     */\n    filterToken(token) {\n      return token.type === 'purpose';\n    },\n\n    /**\n     * And finally we group them by color scheme\n     * You will receive a token and return the group for it\n     */\n    groupForToken(token) {\n      return token.colorScheme ? token.colorScheme : 'base';\n    }\n  }\n}\n")),Object(a.b)("p",null,"Reference: ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"api/theemo.lexerconfig"}),"LexerConfig")),Object(a.b)("h2",{id:"3-writer"},"3. Writer"),Object(a.b)("p",null,"The writer takes your grouped token collection and writes them to the disk. The\nlogic depends on your used ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"/theemo/docs/toolchain/glossary#token-manager-tool"}),"token manager tool"),",\nwith it there are three main instructions for configuration:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"The formats in which colors shall be written"),Object(a.b)("li",{parentName:"ul"},"The file name for a token"),Object(a.b)("li",{parentName:"ul"},"The property path for a token. The path is an array and will be used to create\na POJO object")),Object(a.b)("p",null,"For easier understanding of the following snippt, the token has the following\nname: ",Object(a.b)("inlineCode",{parentName:"p"},"foo.bar/baz.bam")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"{\n  writer: {\n    formats: {\n      color: 'hex',\n      colorAlpha: 'rgb',\n    },\n\n    /**\n     * The file in this case is the part before the first `/` in the token name.\n     */\n    fileForToken(token) {\n      const slashIndex = token.name.indexOf('/')\n      return token.name.slice(0, slashIndex).replace(/\\./g, '/');\n    },\n\n    /**\n     * The property path for a token is the part after the first `/`\n     * with the category as prefix and a color scheme as suffix.\n     */\n    pathForToken(token) {\n      const slashIndex = token.name.indexOf('/')\n      let name = token.name.slice(slashIndex + 1);\n\n      if (token.category) {\n        name = `${token.category}.${name}`;\n      }\n\n      const path = name.split('.');\n\n      if (token.colorScheme) {\n        path.push(`.$${token.colorScheme}`);\n      }\n\n      return path;\n    }\n  }\n}\n")),Object(a.b)("p",null,"Reference: ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"api/theemo.writerconfig"}),"WriterConfig")))}p.isMDXComponent=!0},200:function(e,n,t){"use strict";t.d(n,"a",(function(){return b})),t.d(n,"b",(function(){return h}));var r=t(0),o=t.n(r);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=o.a.createContext({}),p=function(e){var n=o.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},b=function(e){var n=p(e.components);return o.a.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},m=o.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),b=p(t),m=r,h=b["".concat(i,".").concat(m)]||b[m]||u[m]||a;return t?o.a.createElement(h,l(l({ref:n},s),{},{components:t})):o.a.createElement(h,l({ref:n},s))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,i=new Array(a);i[0]=m;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<a;s++)i[s]=t[s];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"}}]);